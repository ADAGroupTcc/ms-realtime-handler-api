# ms-chatpicpay-websocket-handler-api

Microsserviço que implementa uma API

O template implementa:

- [A estrutura de diretórios recomendada](https://picpay.atlassian.net/wiki/spaces/Golang/pages/2651062451/Organiza+o+de+pacotes+e+conven+o+de+nomes)
- [O nosso Guideline de Go](https://picpay.atlassian.net/wiki/spaces/Golang/pages/2620620802/Guidelines+Go)
- O [padrão de logs](https://picpay.atlassian.net/wiki/spaces/SMONITORING/pages/1103692144/Cartilha+de+Logs+-+Padroniza+o), implementado na [lib logger](https://github.com/PicPay/lib-go-logger)
- A abstração de frameworks web, implementada na [lib api](https://github.com/PicPay/lib-go-api)

## Checklist Microservice Chassis

| Funcionalidade                                                                                                                                             | [Requirement Level](https://datatracker.ietf.org/doc/html/rfc2119) | Status                     | Observações                                                                                                                                                                                                |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------ | -------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [Autenticação](https://picpay.atlassian.net/wiki/spaces/ARQ/pages/3245736086/RFC+0007+-+Microservice+Chassis#Autentica%C3%A7%C3%A3o-e-Autoriza%C3%A7%C3%A3o)                                 | DEVE                                                               | :eight_pointed_black_star: |                                                                                                                                                                                                            |
| [Autorização](https://picpay.atlassian.net/wiki/spaces/ARQ/pages/3245736086/RFC+0007+-+Microservice+Chassis#Autentica%C3%A7%C3%A3o-e-Autoriza%C3%A7%C3%A3o)                                             | DEVE                                                               | :eight_pointed_black_star: |                                                                                                                                                                                                            |
| [Circuit Breaker](https://picpay.atlassian.net/wiki/spaces/ARQ/pages/3245736086/RFC+0007+-+Microservice+Chassis#Circuit-Breaker)                                     | RECOMENDADO                                                                | :white_check_mark: | Usar a [lib](https://github.com/PicPay/lib-go-circuitbreaker)                                                                                                                     |
| [Comunicação via HTTP](https://picpay.atlassian.net/wiki/spaces/ARQ/pages/3245736086/RFC+0007+-+Microservice+Chassis#Comunica%C3%A7%C3%A3o-via-HTTP)                           | PODE                                                             | :white_check_mark:         | Seguir o [Padrão Rest](https://picpay.atlassian.net/wiki/spaces/ARQ/pages/3476258865/)                                                                                        |
| [Retries/Timeouts/Backoffs](https://picpay.atlassian.net/wiki/spaces/ARQ/pages/3245736086/RFC+0007+-+Microservice+Chassis#Retries%2FTimeouts%2FBackoffs)                   | RECOMENDADO                                                                |                            |                                                                                                                                                                                                            |
| [Comunicação via gRPC](https://picpay.atlassian.net/wiki/spaces/ARQ/pages/3245736086/RFC+0007+-+Microservice+Chassis#Comunica%C3%A7%C3%A3o-via-gRPC)                           | PODE                                                                |                            |                                                                                                                                                                                                            |
| [Idempotência](https://picpay.atlassian.net/wiki/spaces/ARQ/pages/3245736086/RFC+0007+-+Microservice+Chassis#Idempot%C3%AAncia)                                           | RECOMENDADO                                                             |                            |                                                                                                                                                                                                            |
| [Log centralizado](https://picpay.atlassian.net/wiki/spaces/ARQ/pages/3245736086/RFC+0007+-+Microservice+Chassis#Log-centralizado)                                   | DEVE                                                               | :white_check_mark:         | Via [lib de logs](https://github.com/PicPay/lib-go-logger)                                                                                                                                                 |
| [Métricas](https://picpay.atlassian.net/wiki/spaces/ARQ/pages/3245736086/RFC+0007+-+Microservice+Chassis#M%C3%A9tricas)                                                   | DEVE                                                               | :white_check_mark: | Usar a [lib](https://github.com/PicPay/lib-go-instrumentation)                                                                                                                                             |
| [Distributed tracing](https://picpay.atlassian.net/wiki/spaces/ARQ/pages/3245736086/RFC+0007+-+Microservice+Chassis#Distributed-tracing)                             | DEVE                                                               | :white_check_mark: | Usar a [lib](https://github.com/PicPay/lib-go-instrumentation)                                                                                                                                             |
| [Rate Limit](https://picpay.atlassian.net/wiki/spaces/ARQ/pages/3245736086/RFC+0007+-+Microservice+Chassis#Rate-Limit)                                               | RECOMENDADO                                                             | :white_check_mark: | Seguir a [documentação](https://picpay.atlassian.net/wiki/spaces/Golang/pages/2843345635/Rate+Limit)                                                                                                       |
| [Graceful Shutdown](https://picpay.atlassian.net/wiki/spaces/ARQ/pages/3245736086/RFC+0007+-+Microservice+Chassis#Graceful-Shutdown)                                 | DEVE                                                               | :white_check_mark:         |                                                                                                                                                                                                            |
| [Service Discovery](https://picpay.atlassian.net/wiki/spaces/ARQ/pages/3245736086/RFC+0007+-+Microservice+Chassis#Service-Discoveryy)                                 | PODE                                                                |                            |                                                                                                                                                                                                            |
| [Mensageria](https://picpay.atlassian.net/wiki/spaces/ARQ/pages/3245736086/RFC+0007+-+Microservice+Chassis#Comunica%C3%A7%C3%A3o-via-Kafka)                         | PODE                                                                |                            |                                                                                                                                                                                                            |
| [Documentação](https://picpay.atlassian.net/wiki/spaces/ARQ/pages/3245736086/RFC+0007+-+Microservice+Chassis#Documenta%C3%A7%C3%A3o)                                           | DEVE                                                               | :white_check_mark:         | Documentar a API usando o padrão OpenAPI                                                  |
| [Deploy automatizado](https://picpay.atlassian.net/wiki/spaces/ARQ/pages/3245736086/RFC+0007+-+Microservice+Chassis#Deploy-automatizado)                             | DEVE                                                               | :white_check_mark:         |                                                                                                                                                                                                            |
| [Ambiente local de desenvolvimento](https://picpay.atlassian.net/wiki/spaces/ARQ/pages/3245736086/RFC+0007+-+Microservice+Chassis#Ambiente-local-de-desenvolvimento) | RECOMENDADO                                                             | :eight_pointed_black_star: |                                                                                                                                                                                                            |
| [Testes](https://picpay.atlassian.net/wiki/spaces/ARQ/pages/3245736086/RFC+0007+-+Microservice+Chassis#Testes)                                                       | DEVE                                                               | :eight_pointed_black_star: |                                                                                                                                                                                                            |
| [Conexão com banco de dados](https://picpay.atlassian.net/wiki/spaces/ARQ/pages/3245736086/RFC+0007+-+Microservice+Chassis#Conex%C3%A3o-com-banco-de-dados)               | PODE                                                                |                            |                                                                                                                                                                                                            |
| [Variáveis de ambiente](https://picpay.atlassian.net/wiki/spaces/ARQ/pages/3245736086/RFC+0007+-+Microservice+Chassis#Vari%C3%A1veis-de-ambiente-e-Secrets)                         | DEVE                                                               | :eight_pointed_black_star: |                                                                                                                                                                                                            |
| [Secrets](https://picpay.atlassian.net/wiki/spaces/ARQ/pages/3245736086/RFC+0007+-+Microservice+Chassis#Vari%C3%A1veis-de-ambiente-e-Secrets)                                                     | PODE                                                                | :eight_pointed_black_star: |                                                                                                                                                                                                            |
| [Health check](https://picpay.atlassian.net/wiki/spaces/ARQ/pages/3245736086/RFC+0007+-+Microservice+Chassis#Health-check)                                           | DEVE                                                               | :white_check_mark:         | [Revisar](https://github.com/PicPay/moonlight-template-go-api/blob/main/internal/http/chi/health.go) para incluir o teste das dependências no health-check, como conexões com bancos de dados, filas, etc. |
| [Feature Flags](https://picpay.atlassian.net/wiki/spaces/ARQ/pages/3245736086/RFC+0007+-+Microservice+Chassis#Feature-Flags)                                         | PODE                                                                |                            |                                                                                                                                                                                                            |
| [Eventos](https://picpay.atlassian.net/wiki/spaces/ARQ/pages/3245736086/RFC+0007+-+Microservice+Chassis#%5BhardBreak%5DEventos)                                         | PODE                                                                |                            |                                                                                                                                                                                                            |

### Legenda

- :white_check_mark: - Requisito cumprido
- :no_entry: - Não usado pelo projeto
- :eight_pointed_black_star: - Implementação recomendada

## Documentação

- [Executando localmente](docs/pages/comecar.md)
- [Instalando os hooks de pre-commit](docs/pages/comecar.md#pre-commit)
- [Configurando a aplicação](docs/pages/comecar.md#configuracao)

## Notas

Alterar no arquivo .sonarcloud.properties as classes que devem incluídas ou excluídas das analises de Quality Gate.
Em caso de dúvidas, acesse a [FAQ](https://picpay.atlassian.net/wiki/spaces/DUP/pages/2528051668/SonarCloud) ou entre em contato no slack #suporte-sonar
